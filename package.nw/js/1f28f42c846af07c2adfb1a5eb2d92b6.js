;!function(require, directRequire){;'use strict';const fs=require('fs'),path=require('path'),mkdir=require('mkdir-p'),autoprefixer=require('autoprefixer'),PostCss=require('postcss'),contentWatcher=require('./162bf2ee28b76d3b3d95b685cede4146.js'),locales=require('./common/locales/index.js'),wxssBrowser=['iOS >= 8','Chrome >= 37'],pluginContentWatcher=require('./a63026ab5a5a3c59a61a9749a18aa2ca.js'),compileTypeConfig=require('./9fdd4ac31a05c27355910f0d74accd4c.js'),{bufToUTF8}=require('./efc820e1b92d6e4063535296d4a24213.js'),{FILE_NOT_UTF8,POST_WXSS_ERR}=require('./949d8235c744ced2a80121e4dba34c28.js');function leading(a,b){return'string'==typeof a?a.startsWith(b)?a:b+a:a}function compileWXSS(a,b){const c=a.setting.postcss,{srcFilePath:d,fileBuffer:e,destFilePath:f}=b;let g=bufToUTF8(e);if(void 0===g){const a=new Error(locales.config.FILE_NOT_UTF8.format(d));throw a.code=FILE_NOT_UTF8,a}if(c)try{g=PostCss([autoprefixer({browsers:wxssBrowser,remove:!1})]).process(g,{from:leading(d,'/')}).css}catch(a){const b=new Error(a.message);throw b.code=POST_WXSS_ERR,b.parseError=a.parseError,b}const h=path.dirname(f);mkdir.sync(h),fs.writeFileSync(f,g)}async function compileProjectWXSS(a,b){const c=a.compileType,{distPath:d}=b;let e=await contentWatcher(a),f=e.getAllWXSSFiles(),g=c===compileTypeConfig.plugin?a.miniprogramRoot:'';for(let c=0,h=f.length;c<h;c++){const b=f[c],h=e.getFile(b,null);compileWXSS(a,{fileBuffer:h,srcFilePath:path.join(g,b),destFilePath:path.join(d,g,b)})}if(compileTypeConfig.plugin===c){e=await pluginContentWatcher(a),f=e.getAllWXSSFiles(),g=a.pluginRoot||'';for(let b=0,c=f.length;b<c;b++){const c=f[b],h=e.getFile(c,null);compileWXSS(a,{fileBuffer:h,srcFilePath:path.join(g,c),destFilePath:path.join(d,g,c)})}}}module.exports=compileProjectWXSS;
;}(require("lazyload"), require);
