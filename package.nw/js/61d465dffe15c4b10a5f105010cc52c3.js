;!function(require, directRequire){;"use strict";const tslib_1=require("tslib"),React=require("react"),cssConfig=require('./3b5f8e2469c474c8d433c1c6926d8999.js'),NavigationBar=require('./d559680a1a0c2551cbce1a9fb152cb99.js'),StatusBar=require('./4389a88e405d1d37f36c16fc0ec96540.js'),locales=require('./common/locales/index.js');let ViewCard=class extends React.Component{constructor(a){super(a),this.state={showDetails:!1,cardIndex:-1}}componentDidMount(){this._cancalLocaleListener=locales.onChangeLocale(()=>this.forceUpdate())}componentWillUnmount(){this._cancalLocaleListener()}formatTime(a){const b=new Date(1e3*a);return`${b.getFullYear()}.${b.getMonth()+1}.${b.getDate()}`}onDetailClick(){this.props.cardInfo&&1<this.props.cardInfo.length?this.setState({showDetails:!1,cardIndex:-1}):this.props.hideCardView({})}cancel(){this.props.hideCardView({})}cardDetail(a){const b=a.currentTarget,c=b.dataset,d=c.index;this.setState({showDetails:!0,cardIndex:d})}render(){const a=this.props,b=a.show?{}:cssConfig.displayNone;b.width=a.width,b.height=a.height,b.transform=`scale(${a.deviceScale})`,b.marginLeft=-a.width/2,b.transformOrigin="50% 0",a.isPopup&&(b.top=0);let c=null,d=null;const e=a.cardInfo,f=a.errData;if(-1!==this.state.cardIndex){const b=e[this.state.cardIndex],f=b.card_data_info,g=b.card_tp_info,h=this.formatTime(f.begin_time),i=this.formatTime(f.end_time),j=g.brand_name,k=g.title,l=g.logo_url;let m;const n={};n.backgroundColor=g.color,m=0===g.limit_num?React.createElement("div",{className:"coupons-profile-action"},React.createElement("button",{className:"coupons-profile-button",style:{borderColor:"#63B35A",color:"#63B35A"}},g.limit_wording)):React.createElement("div",{className:"coupons-profile-action"},React.createElement("button",{className:"coupons-profile-button",style:{borderColor:"#63B35A",color:"#63B35A"}},f.operate_field&&f.operate_field.title||locales.config.VIEW_DETAILS)),d=React.createElement(NavigationBar,{cover:!0,height:a.navigationbarHeight,title:locales.config.CARDS_LIST,backgroundColor:"#000000",frontColor:"#ffffff",showLeftBtn:!0,onLeftBtnClick:this.onDetailClick.bind(this)}),c=React.createElement("div",{className:"coupons-detail"},React.createElement("div",{className:"coupons-profile-wrapper"},React.createElement("div",{className:"coupons-profile",style:n},React.createElement("div",{className:"coupons-profile-bd"},React.createElement("div",{className:"ui-flex"},React.createElement("div",{className:"coupons-profile-logo"},React.createElement("img",{src:l})),React.createElement("div",{className:"ui-flex-item"},React.createElement("p",{className:"coupons-profile-biz"},j),React.createElement("p",{className:"coupons-profile-name"},k)))),React.createElement("div",{className:"coupons-profile-ft"},React.createElement("p",{className:"coupons-profile-serial"},locales.config.VALID_PERIOD.format([h,i])))),m))}else{const b=e.map((a,b)=>{const c=a.card_tp_info;return React.createElement("div",{className:"coupons-item ui-flex",key:b,"data-index":b,onClick:this.cardDetail.bind(this)},React.createElement("div",{className:"coupons-item-logo"},React.createElement("img",{src:c.logo_url})),React.createElement("div",{className:"ui-flex-item"},React.createElement("p",{className:"coupons-item-biz"},c.brand_name),React.createElement("p",{className:"coupons-item-name"},c.title)))}),g=f.map((a,b)=>React.createElement("div",{key:b,className:"webview-card-choose-item"},React.createElement("div",{className:"webview-card-choose_mErr"},React.createElement("div",{className:"webview-card-choose_details"},React.createElement("div",{className:"webview-card-choose-item_error"},locales.config.WRONG_CARD),React.createElement("div",{className:"webview-card-choose-item_error"},"cardId: ",a.card_id),React.createElement("div",{className:"webview-card-choose-item_error"},"code: ",a.code)))));d=React.createElement(NavigationBar,{height:a.navigationbarHeight,title:locales.config.CARDS_LIST,backgroundColor:"#000000",frontColor:"#ffffff",showLeftBtn:!0,onLeftBtnClick:this.cancel.bind(this)}),c=React.createElement("div",{className:"coupons-list"},b,g)}return React.createElement("div",{className:"simulator",style:b},React.createElement(StatusBar,null),d,React.createElement("div",{className:"webview"},React.createElement("div",{className:"coupons"},c)))}};ViewCard=tslib_1.__decorate([locales.mixin],ViewCard),module.exports=ViewCard;
;}(require("lazyload"), require);
