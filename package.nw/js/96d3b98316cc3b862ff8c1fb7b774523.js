;!function(require, directRequire){;"use strict";const tslib_1=require("tslib"),React=require("react"),cssConfig=require('./3b5f8e2469c474c8d433c1c6926d8999.js'),NavigationBar=require('./d559680a1a0c2551cbce1a9fb152cb99.js'),StatusBar=require('./4389a88e405d1d37f36c16fc0ec96540.js'),locales=require('./common/locales/index.js');let AddCard=class extends React.Component{constructor(a){super(a)}componentDidMount(){this._cancalLocaleListener=locales.onChangeLocale(()=>this.forceUpdate())}componentWillUnmount(){this._cancalLocaleListener()}formatTime(a){const b=new Date(1e3*a);return`${b.getFullYear()}.${b.getMonth()+1}.${b.getDate()}`}batchAddCard(){const a=this.props,b=a.args,c=b.cardList||[],d=[];for(const a of c)d.push({card_id:a.card_id,card_ext:a.card_ext,is_succ:1});this.props.batchAddCard({callbackID:a.callbackID,runtimeID:this.props.runtimeID,list:d})}cancel(){this.props.hideCardView({callbackID:this.props.callbackID,runtimeID:this.props.runtimeID,res:{errMsg:"addCard:cancel"},api:"addCard"})}render(){const a=this.props,b=a.show?{}:cssConfig.displayNone;b.width=a.width,b.height=a.height,b.backgroundColor="#63B35A",b.transform=`scale(${a.deviceScale})`,b.marginLeft=-a.width/2,b.transformOrigin="50% 0",a.isPopup&&(b.top=0);const c=a.cardInfo||[];let d="";const e=c.map((a,c)=>{const e=a.card_tp_info||{},f=e.brand_name,g=e.title,h=e.logo_url;if(a.errmsg)return React.createElement("div",{className:"ui-flex",key:c},React.createElement("div",{className:"coupons-card-logo"},React.createElement("img",{src:h})),React.createElement("div",{className:"ui-flex-item"},React.createElement("p",{className:"coupons-card-biz"},locales.config.WRONG_CARD),React.createElement("p",{className:"coupons-card-name"},"cardId: ",a.card_id),React.createElement("p",{className:"coupons-valid"},"errmsg: ",a.errmsg)));const i=a.card_data_info,j=this.formatTime(e.begin_time),k=this.formatTime(e.end_time);return 0===i.limit_num&&(d=e.limit_wording),b.backgroundColor=e.color,React.createElement("div",{className:"ui-flex",key:c},React.createElement("div",{className:"coupons-card-logo"},React.createElement("img",{src:h})),React.createElement("div",{className:"ui-flex-item"},React.createElement("p",{className:"coupons-card-biz"},f),React.createElement("p",{className:"coupons-card-name"},g," ",React.createElement("span",{className:"coupons-card-counter"},"x",a.amount)),React.createElement("p",{className:"coupons-valid"},j," ","-"," ",k)))});return React.createElement("div",{className:"simulator",style:b},React.createElement(StatusBar,{backgroundColor:b.backgroundColor}),React.createElement(NavigationBar,{cover:!0,height:a.navigationbarHeight,title:locales.config.ADD_CARD,backgroundColor:b.backgroundColor,frontColor:"#ffffff",showLeftBtn:!0,onLeftBtnClick:this.cancel.bind(this)}),React.createElement("div",{className:"webview"},React.createElement("div",{className:"coupons"},React.createElement("div",{className:"coupons-chooser",style:{backgroundColor:b.backgroundColor}},React.createElement("div",{className:"coupons-card"},React.createElement("div",{className:"coupons-card-bd"},e),d?React.createElement("div",{className:"coupons-card-ft"},React.createElement("button",{className:"coupons-card-button disabled",style:{backgroundColor:b.backgroundColor}},d)):React.createElement("div",{className:"coupons-card-ft",onClick:this.batchAddCard.bind(this)},React.createElement("button",{className:"coupons-card-button",style:{backgroundColor:b.backgroundColor}},locales.config.RECEIVED_CARD)))))))}};AddCard=tslib_1.__decorate([locales.mixin],AddCard),module.exports=AddCard;
;}(require("lazyload"), require);
