;!function(require, directRequire){;"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report=require('./da7c31daaf542cf1796023d8e344b98a.js'),config_1=require('./a148d3a11fd5268109e21fb40c9d527b.js'),log_1=require('./56a764ae9cb4336bf6babe1c1da0275b.js'),log=log_1.default("[reporter]");let cachedSdkApiReports=[],cachedDataSendReports=[];var ReportType;(function(a){a[a.SDKAPI=0]="SDKAPI",a[a.DataSend=1]="DataSend"})(ReportType=exports.ReportType||(exports.ReportType={}));let lastReportTimestamp=0;const REPORT_INTERVAL=30000;let reportCounter=0;function reportData(a,b,c){if(b===ReportType.SDKAPI)cachedSdkApiReports.push(...c);else if(b===ReportType.DataSend)cachedDataSendReports.push(...c);else return void log.w("invalid report type");reportCounter+=c.length,(!lastReportTimestamp||Date.now()-lastReportTimestamp>REPORT_INTERVAL&&30<=reportCounter)&&(doReport(a),clear())}exports.reportData=reportData;function clear(){reportCounter=0,cachedSdkApiReports=[],cachedDataSendReports=[],lastReportTimestamp=Date.now()}function getNetworkType(){if("undefined"!=typeof navigator&&navigator){const a=navigator,b=((a.connection||{}).type||"").toLowerCase(),c=config_1.DevtoolNetworkType[b];if("number"==typeof c)return c}return config_1.DevtoolNetworkType.unknown}function getSDKApiReports(a){const b=getNetworkType(),c=cachedSdkApiReports.slice(0,a),d=c.map((a)=>{return{time_cost:a.cost_time,size_a:a.data_size,size_b:a.ret_data_size,scene_type:2,method:"invokeHandler",js_api_name:a.sdk_name,network_type:b}});return d}function getDataSendReports(a){const b=getNetworkType(),c=cachedDataSendReports.slice(0,a),d=c.map((a)=>{return{time_cost:a.cost_time,size_a:a.data_size,scene_type:0,network_type:b}});return d}function doReport(a){const b=getSDKApiReports(300),c=getDataSendReports(300),d=[...b,...c];if(!(1>d.length)){log.i("report data of length",d.length),log.i("dataSendReports",c.length,"sdkApiReports",b.length);try{report("remote_debug_report",a,JSON.stringify({reports:d}))}catch(a){log.w("report failed",a)}}}
;}(require("lazyload"), require);
