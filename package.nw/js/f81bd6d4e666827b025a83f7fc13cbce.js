;!function(require, directRequire){;'use strict';const _=require('lodash'),{REHYDRATE}=require('redux-persist/constants'),deviceConfig=require('./46696da2c374c1de94184ccaf32ab38a.js'),actionsConfig=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),clickKeyConfig=require('./eadce02c750c875a10680bcfedadec88.js'),weappConfig=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),locales=require('./common/locales/index.js'),ls=require('./84858de8a097c9cf84ff2c2e3d86e2a9.js'),getDefaultDeviceList=()=>deviceConfig.map((a)=>{const b=a.statusbarHeight||weappConfig.default_statusbar_height;let c=a.navigationbarHeightPortrait||weappConfig.default_android_navigationbar_height,d=a.navigationbarHeightLandscape||c,e=weappConfig.default_android_tabbar_height;'iOS'===a.os&&(c=a.navigationbarHeightPortrait||weappConfig.default_ios_navigationbar_height,d=a.navigationbarHeightLandscape||c,e=a.tabbarHeight||weappConfig.default_ios_tabbar_height);const{screenHeight:f,screenWidth:g,dpr:h,model:i}=a,j={os:a.os,ua:a.ua,title:i,model:i,dpr:h,screenHeight:f,screenWidth:g,statusbarHeight:b,navigationbarHeight:c,navigationbarHeightPortrait:c,navigationbarHeightLandscape:d,tabbarHeight:e,isPad:!!a.isPad};return{name:i,desc:`${g} x ${f} | Dpr:${h}`,type:'default',info:j}}),getInitialState=()=>{const a=getDefaultDeviceList();return{autoPreviewTimestamp:0,clickKey:'none',network:{current:0,list:['wifi','2g','3g','4g','none']},device:{current:0,list:a},deviceInfo:Object.assign({},a[0].info),rotated:!1,rotatedBeforeRoute:!1,deviceStatus:{brightness:0.5,accelerometer:!1,compass:!1,screenon:!1},compileType:{current:'weapp',list:{weapp:locales.config.MINI_PROGRAM,widget:locales.config.DYNAMIC_PAGE,search:locales.config.SEARCH_PAGE}},deviceScale:1,config:{title:!0,cos:!1,cloud:!0,qcloud:!1,test:!1,bbs:!0,tgit:!0,upload:!0,plugin:{}},muted:!1}};function toolbar(a=getInitialState(),b={}){switch(b.type){case actionsConfig.BODY_CLICK:return Object.assign({},a,{clickKey:clickKeyConfig.NONE});case actionsConfig.TOOLBAR_TOGGLE_NETWORK:{const b=a.clickKey===clickKeyConfig.NETWORK?clickKeyConfig.NONE:clickKeyConfig.NETWORK;return Object.assign({},a,{clickKey:b})}case actionsConfig.TOOLBAR_TOGGLE_SIMULATORACTION:{const b=a.clickKey===clickKeyConfig.SIMULATORACTION?clickKeyConfig.NONE:clickKeyConfig.SIMULATORACTION;return Object.assign({},a,{clickKey:b})}case actionsConfig.TOOLBAR_TOGGLE_DEVICE:{const b=a.clickKey===clickKeyConfig.DEVICE?clickKeyConfig.NONE:clickKeyConfig.DEVICE;return Object.assign({},a,{clickKey:b})}case actionsConfig.TOOLBAR_TOGGLE_COMPACT:{const b=a.clickKey===clickKeyConfig.COMPACT?clickKeyConfig.NONE:clickKeyConfig.COMPACT;return Object.assign({},a,{clickKey:b})}case actionsConfig.TOOLBAR_TOGGLE_INFO:{const b=a.clickKey===clickKeyConfig.INFO?clickKeyConfig.NONE:clickKeyConfig.INFO;return Object.assign({},a,{clickKey:b})}case actionsConfig.TOOLBAR_TOGGLE_COMPILETYPE:{const b=a.clickKey===clickKeyConfig.COMPILETYPE?clickKeyConfig.NONE:clickKeyConfig.COMPILETYPE;return Object.assign({},a,{clickKey:b})}case actionsConfig.WINDOW_SET_MAIN_WINDOW:return Object.assign({},a,{clickKey:clickKeyConfig.NONE});case actionsConfig.TOOLBAR_SELECT_NETWORK:return Object.assign({},a,{clickKey:clickKeyConfig.NONE,network:Object.assign({},a.network,{current:b.data})});case actionsConfig.TOOLBAR_SELECT_DEVICE:{let c;try{c=a.device.list[b.data].info}catch(b){return a}const d=!1;return Object.assign({},a,{clickKey:clickKeyConfig.NONE,device:Object.assign({},a.device,{current:b.data}),deviceInfo:c,rotated:d,rotatedBeforeRoute:d})}case actionsConfig.TOOLBAR_SET_DEVICE_ROTATED:return Object.assign({},a,{rotated:b.data});case actionsConfig.TOOLBAR_SET_DEVICE_ROTATED_BEFORE_ROUTE:return Object.assign({},a,{rotatedBeforeRoute:b.data});case actionsConfig.TOOLBAR_SELECT_COMPILETYPE:return Object.assign({},a,{clickKey:clickKeyConfig.NONE,compileType:Object.assign({},a.compileType,{current:b.data})});case actionsConfig.TOOLBAR_TOGGLE_CLICKKEY:{const c=a.clickKey===b.clickKey?clickKeyConfig.NONE:b.clickKey;return Object.assign({},a,{clickKey:c})}case actionsConfig.TOOLBAR_PREVIEW_CODE:return Object.assign({},a,{clickKey:clickKeyConfig.PREVIEWCODE});case actionsConfig.TOOLBAR_AUTO_PREVIEW:return Object.assign({},a,{autoPreviewTimestamp:b.data});case actionsConfig.TOOLBAR_REMOTE_DEBUG_CODE:return Object.assign({},a,{clickKey:clickKeyConfig.REMOTEDEBUGCODE});case actionsConfig.TOOLBAR_SET_DEVICE_STATUS:return Object.assign({},a,{deviceStatus:Object.assign({},a.deviceStatus,b.data)});case actionsConfig.TOOLBAR_SET_CLICKKEY:return Object.assign({},a,{clickKey:b.data});case actionsConfig.WINDOW_RESIZE:return Object.assign({},a,{clickKey:clickKeyConfig.NONE});case actionsConfig.PROJECT_CLOSE_PROJECT:return Object.assign({},a,{clickKey:clickKeyConfig.NONE});case actionsConfig.TOOLBAR_SET_DEVICESCALE:return Object.assign({},a,{deviceScale:b.data});case actionsConfig.USER_LOGIN_EXPIRED:return Object.assign({},a,{clickKey:clickKeyConfig.LOGINQRCODE});case actionsConfig.TOOLBAR_ADD_DEVICE:{const c=global.appVersion,d=[].concat(a.device.list),{height:e,width:f,dpr:g,name:h}=b.data,i={title:h,model:h,os:'Android',ua:`Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.23 Mobile Safari/537.36 wechatdevtools/${c} MicroMessenger/${'6.7.3'} webview/{{webviewID}}`,dpr:g,screenWidth:f,screenHeight:e,statusbarHeight:weappConfig.default_statusbar_height,navigationbarHeight:weappConfig.default_android_navigationbar_height,tabbarHeight:weappConfig.default_android_tabbar_height},j={name:h,desc:`${f} x ${e} | Dpr:${g}`,type:'custom',info:i};return d.push(j),Object.assign({},a,{device:{current:d.length-1,list:d},deviceInfo:Object.assign({},i)})}case actionsConfig.TOOLBAR_REMOVE_DEVICE:{try{const c=a.device.list[b.data];if('custom'===c.type){const c=[].concat(a.device.list);c.splice(b.data,1);const d=Object.assign({},a,{device:{current:0,list:c},deviceInfo:Object.assign({},c[0].info)});return d}}catch(a){}return a}case actionsConfig.TOOLBAR_CONFIG:return Object.assign({},a,{config:Object.assign({},a.config,b.data)});case actionsConfig.TOOLBAR_SET_MUTED:return Object.assign({},a,{muted:b.data});case actionsConfig.TOOLBAR_SYNC_STORE:{let c=Object.assign({},a);return c=_.merge(c,b.data.toolbar),c}case REHYDRATE:{const c=global.devInfo&&global.devInfo.projectid?ls.getToolbarForProject(global.devInfo.projectid):null;c?c.device&&delete c.device.list:b.payload.toolbar&&(delete b.payload.toolbar.config,b.payload.toolbar.rotatedBeforeRoute=!1,b.payload.toolbar.rotated=!1);const d=_.merge(_.cloneDeep(a),b.payload.toolbar,c);d.clickKey=clickKeyConfig.NONE;const e=getDefaultDeviceList();return d.device.list.forEach((a)=>{'default'!==a.type&&e.push(a)}),d.device.list=e,d.deviceInfo.ua=d.deviceInfo.ua.replace(/wechatdevtools\/([\d\.]*)/,`wechatdevtools/${global.appVersion}`),'iPhone X'===d.deviceInfo.model&&(d.deviceInfo.tabbarHeight=82),d}default:return a;}}module.exports=toolbar;
;}(require("lazyload"), require);
