'use strict';!function(require,directRequire){function a(a,b){return Math.floor(Math.random()*(b-a+1))+a}function b(){const a=h.getState(),b=a.simulator||{},c=((a.project||{}).current||{}).runtimeAttr,d=((c||{}).setting||{}).ExpendedMaxWebviewDepth||f.MAX_PAGE_STACK_DEPTH,e=b.webviewInfos||{};let g=0,i=!1;for(const a in e)i||-1!=e[a].parent||(i=!0,g++),-1!=e[a].parent&&g++;return g<d}function c(a){const b=h.getState(),c=h.dispatch.bind(h),d=g.checkIsInSubPackage(b.simulator.appConfig,a);d?c({type:e.SIMULATOR_LOAD_SUBPACKAGE,data:{root:d.root,loaded:!1}}):c({type:e.SIMULATOR_LOAD_SUBPACKAGE,data:{root:'__APP__',loaded:!1}})}function d(a){const b=h.getState();let c=-1;const d=`${a}.html`;try{c=b.simulator.appConfig.tabBar.list.findIndex((a)=>a.pagePath&&a.pagePath==d)}catch(a){c=-1}return c}const e=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),f=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),g=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),h=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),i=require('./common/locales/index.js'),{rotateSimulator:j,getOriginalPageOrientationObject:k,getCurrentPageOrientationObject:l,getPreviousPageOrientationObject:m,getPageOrientationValue:n,shouldSimulatorRotate:o}=require('./a3d662b5798bbb27bf21be3e3587a588.js'),p=(a,b,c)=>(d)=>{const f=h.getState(),{toolbar:{rotated:g}}=f,i=o(a,b);let k=g;i&&(k=!k),'navigate'===c&&d({type:e.TOOLBAR_SET_DEVICE_ROTATED_BEFORE_ROUTE,data:g}),(i||k^'landscape'===b.lastPageOrientation)&&('back'===c?j(k,d,h.getState):j(k,d,h.getState,{triggerAppserviceEvent:!1,triggerWebviewEvent:!0}))};module.exports={navigateTo:async function(a,f){if(!b())return{errMsg:`${f.api}:fail webview count limit exceed`};const{pathName:i,query:j}=g.parseUrl(f.args.url);if(0<=d(i))return{errMsg:`${f.api}:fail can not navigateTo a tabbar page`};const m=h.getState(),o=l(m),q=k(m.simulator.appConfig,i,n(o));return a({type:e.SIMULATOR_NAVIGATE,data:{pathName:i,query:j}}),p(o,q,'navigate')(a),c(i),{errMsg:`${f.api}:ok`}},navigateBack:async function(a,b){const c=b.args.delta||1,d=h.getState(),f=l(d),g=m(d,c);return a({type:e.SIMULATOR_NAVIGATE_BACK,delta:c}),p(f,g,'back')(a),{errMsg:`${b.api}:ok`}},redirectTo:async function(a,b){const{pathName:f,query:i}=g.parseUrl(b.args.url);if(0<=d(f))return{errMsg:`${b.api}:fail can not redirectTo a tabbar page`};const j=h.getState(),m=l(j),o=k(j.simulator.appConfig,f,n(m));return a({type:e.SIMULATOR_REDIRECT,data:{pathName:f,query:i}}),p(m,o,'navigate')(a),c(f),{errMsg:`${b.api}:ok`}},switchTab:async function(a,b){const{pathName:f}=g.parseUrl(b.args.url),i=d(f),j=h.getState(),m=l(j),o=k(j.simulator.appConfig,f,n(m));return-1==i?{errMsg:`${b.api}:fail can not switch to no-tabBar page`}:(a({type:e.SIMULATOR_OPEN_TABBAR,data:{query:{},pathName:f,tabbarIndex:i}}),p(m,o,'navigate')(a),c(f),{errMsg:`${b.api}:ok`})},reLaunch:async function(a,b){const{pathName:d,query:f}=g.parseUrl(b.args.url),i=h.getState(),j=l(i),m=k(i.simulator.appConfig,d,n(j));return a({type:e.SIMULATOR_RELAUNCH,data:{pathName:d,query:f}}),p(j,m,'relaunch')(a),c(d),{errMsg:`${b.api}:ok`}},updateApp:async function(b,c){return b({type:e.SIMULATOR_SET_TOAST,data:{show:!0,icon:'loading',title:i.config.APPLICATION_RESTARTING,mask:!0}}),setTimeout(()=>{b({type:e.SIMULATOR_COMPILE,data:{}})},a(1e3,5e3)),{errMsg:`${c.api}:ok`}},openUrl:async function(a,b){const c=h.getState();if(c.simulator.anyHtmlWebviewInfo)return{errMsg:`${b.api}:fail could not open unless the previous webpage is closed`};for(const d in c.simulator.webviewInfos){const a=c.simulator.webviewInfos[d];if(a.htmlwebviewInfo)return{errMsg:`${b.api}:fail could not open in a web-view page`}}return a({type:e.SIMULATOR_SET_ANY_HTMLWEBVIEW,data:{url:b.args.url,webviewID:+new Date}}),{errMsg:`${b.api}:ok`}}}}(require('lazyload'),require);